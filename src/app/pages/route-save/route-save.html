<app-header-title
  title="Salvar Roteiro"
  [showBackButton]="true"
  (backClick)="goBack()"
></app-header-title>

<div class="page-container">
  <form class="form" [formGroup]="routeForm" (ngSubmit)="onSaveRoute()">
    <div class="cover-image-container">
      <img [src]="coverImage" alt="Imagem de capa do roteiro" class="cover-image" />
      <button mat-flat-button class="edit-cover-btn" type="button">
        <mat-icon>edit</mat-icon>
        Editar Capa
      </button>
    </div>

    <div class="summary-details">
      <div class="detail-item">
        <mat-icon>schedule</mat-icon>
        <span>Tempo total</span>
        <strong>{{ estimatedTime }}</strong>
      </div>
      <mat-divider [vertical]="true"></mat-divider>
      <div class="detail-item">
        <mat-icon>payments</mat-icon>
        <span>Preço médio</span>
        <strong>{{ estimatedPrice }}</strong>
      </div>
    </div>

    <div class="form-content">
      <mat-form-field appearance="outline">
        <mat-label>Nome do Roteiro</mat-label>
        <input
          matInput
          formControlName="name"
          placeholder="Ex: Fim de semana em Boituva"
          required
        />
        @if (routeForm.get('name')?.hasError('required') && routeForm.get('name')?.touched) {
        <mat-error>O nome é obrigatório.</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Descrição (opcional)</mat-label>
        <textarea
          matInput
          formControlName="description"
          placeholder="Ex: Roteiro focado em gastronomia e aventura..."
          rows="4"
        ></textarea>
      </mat-form-field>
    </div>

    <div class="footer-button-container">
      <button mat-flat-button class="save-button" type="submit" [disabled]="routeForm.invalid">
        Confirmar
      </button>
    </div>
  </form>
</div>
