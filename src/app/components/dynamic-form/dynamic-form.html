<section class="form_container">
  <h2 class="form-title">{{ formTitle }}</h2>
  <form class="dynamicForm" [formGroup]="form" (ngSubmit)="onSubmit()">
    @for (field of fields; track field.name) {
    <div class="form-field">
      <mat-form-field appearance="fill">
        <mat-label>{{ field.label }}</mat-label>
        <input
          matInput
          [type]="field.type"
          [id]="field.name"
          [formControlName]="field.name"
          [placeholder]="field.placeholder"
          [mask]="field.mask"
        />
      </mat-form-field>
      @if (getControl(field.name)?.invalid && getControl(field.name)?.touched) {
      <div class="error-message">
        @for (validation of field.validationMessages; track validation.type) { @if
        (getControl(field.name)?.hasError(validation.type)) {
        <small>{{ validation.message }}</small>
        } }
      </div>
      }
    </div>
    }

    <button 
      mat-flat-button 
      color="primary" 
      type="submit" 
      [disabled]="form.invalid"
      class="submit-button"
    >
      {{ submitButtonText }}
    </button>
  </form>
</section>